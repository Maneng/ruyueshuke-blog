---
title: "模块3：创建ACK集群"
date: 2026-01-29T11:03:00+08:00
draft: false
tags: ["Kubernetes", "阿里云", "ACK", "SOP", "教程"]
categories: ["技术"]
series: ["阿里云ACK部署SOP"]
weight: 3
description: "详细讲解如何在阿里云创建ACK标准托管集群，包括集群类型选择、网络配置、节点池设置等"
---

## 导航

- **上一步**：[模块2：创建VPC网络](/blog/devops/posts/2026-01-29-ack-sop-02-vpc-network/)
- **下一步**：[模块4：配置ALB Ingress](/blog/devops/posts/2026-01-29-ack-sop-04-alb-ingress/)
- **返回主索引**：[阿里云ACK部署SOP](/blog/devops/posts/2026-01-29-aliyun-ack-deployment-sop/)

---

## 模块概述

**预计时间**：30分钟（包含15分钟集群创建等待时间）

**本模块目标**：
- ✅ 理解ACK集群的三种类型
- ✅ 创建标准托管版ACK集群
- ✅ 配置节点池和Worker节点
- ✅ 下载并配置kubeconfig文件
- ✅ 验证集群连接正常

**成本说明**：
- 控制平面：免费（标准托管版）
- Worker节点：约¥223/月/节点（2核4G）
- 本模块预计成本：¥446/月（2个节点）

---

## 步骤3.1：理解ACK集群类型

### 🎬 操作说明
在创建集群之前，我们需要先理解阿里云ACK提供的三种集群类型。这一步不需要操作，只需要理解每种类型的特点和适用场景。

### 📍 详细说明

**ACK集群类型对比表**

| 特性 | 标准托管版 | 专有版 | Serverless版 |
|-----|----------|-------|-------------|
| **控制平面** | 阿里云托管（免费） | 用户自建（收费） | 阿里云托管（免费） |
| **Worker节点** | 用户管理ECS | 用户管理ECS | 无需管理（按Pod收费） |
| **适用场景** | 生产环境、学习测试 | 高安全要求 | 突发流量、测试环境 |
| **成本** | 中等（只付Worker节点费用） | 高（控制平面+Worker节点） | 低（按实际使用付费） |
| **灵活性** | 高 | 最高 | 中等 |
| **运维复杂度** | 低 | 高 | 最低 |

**第1种：标准托管版（推荐）**
- 控制平面由阿里云托管，完全免费
- 你只需要管理Worker节点（运行应用的服务器）
- 适合99%的场景，包括生产环境
- 成本最优，运维最简单

**第2种：专有版**
- 控制平面也是你自己的ECS服务器
- 需要额外付费（3台Master节点）
- 适合金融、政务等高安全要求场景
- 成本高，运维复杂

**第3种：Serverless版**
- 完全无需管理服务器
- 按Pod运行时间付费
- 适合突发流量、测试环境
- 成本最低，但灵活性受限

### ✅ 验证点
- 理解三种集群类型的区别
- 明确我们选择标准托管版的原因

### ⚠️ 常见问题

**问题1：为什么选择标准托管版？**
- 答：控制平面免费，节省成本
- 阿里云负责控制平面的高可用和升级
- 你只需要关注应用本身

**问题2：标准托管版和专有版的安全性有差别吗？**
- 答：没有本质差别
- 标准托管版的控制平面在阿里云的VPC中
- 你的Worker节点和数据都在你自己的VPC中
- 除非有特殊合规要求，标准托管版完全够用

**问题3：Serverless版为什么不推荐？**
- 答：不是不推荐，而是场景不同
- Serverless版适合突发流量（如活动页面）
- 对于常驻服务，标准托管版更经济
- 而且Serverless版的网络配置更复杂

### 💡 小贴士
- 🎯 选择建议：99%的情况选标准托管版
- 💰 成本对比：标准托管版比专有版便宜约¥1500/月
- 📚 学习建议：先用标准托管版，熟悉后再考虑其他类型

---

## 步骤3.2：进入ACK控制台

### 🎬 操作说明
现在我们开始创建集群。第一步是进入ACK控制台，找到创建集群的入口。

### 📍 详细步骤

**第1步：打开阿里云控制台**
- 在浏览器中访问：https://homenew.console.aliyun.com/
- 确认已经登录你的阿里云账号
- 看到控制台首页

**第2步：进入容器服务ACK**
- 在控制台首页顶部，找到搜索框
- 输入"容器服务"或"ACK"
- 在下拉列表中，点击"容器服务 Kubernetes 版"
- 页面跳转到ACK控制台

**第3步：确认地域**
- 在ACK控制台顶部，看到地域选择器
- 点击地域选择器，选择"华东1（杭州）"
- 确认地域切换成功

### ✅ 验证点
- 页面URL包含 `cs.console.aliyun.com`
- 页面左侧菜单显示"集群"、"应用"等选项
- 页面顶部地域显示为"华东1（杭州）"

### ⚠️ 常见问题

**问题1：找不到容器服务入口？**
- 答：可以直接访问 https://cs.console.aliyun.com/
- 或者在控制台首页点击"产品与服务"
- 在"弹性计算"分类下找到"容器服务 Kubernetes 版"

**问题2：地域选择器是灰色的？**
- 答：可能是页面还在加载
- 等待几秒钟，刷新页面
- 如果还是灰色，检查网络连接

### 💡 小贴士
- 🔖 建议收藏ACK控制台地址，方便后续访问
- 🌍 地域选择很重要，后续所有资源都要在同一地域

---

## 步骤3.3：开始创建集群

### 🎬 操作说明
现在我们点击"创建集群"按钮，进入集群创建向导。这个向导会引导我们完成所有配置。

### 📍 详细步骤

**第1步：点击创建集群**
- 在ACK控制台左侧菜单，点击"集群"
- 在集群列表页面，点击右上角的"创建集群"按钮
- 页面跳转到集群类型选择页面

**第2步：选择集群类型**
- 看到三种集群类型的卡片
- 找到"标准托管集群"卡片
- 点击卡片下方的"创建"按钮
- 进入集群配置页面

**第3步：查看配置页面结构**
- 页面分为多个配置区域
- 从上到下依次是：集群配置、网络配置、组件配置等
- 右侧有费用预估面板
- 底部有"创建集群"按钮

### ✅ 验证点
- 页面标题显示"创建标准托管集群"
- 页面右侧显示费用预估（初始为¥0.00/月）
- 页面底部有蓝色的"创建集群"按钮

### ⚠️ 常见问题

**问题1：没有"创建集群"按钮？**
- 答：可能是权限不足
- 检查你的RAM用户是否有ACK的创建权限
- 或者使用主账号登录

**问题2：页面显示"配额不足"？**
- 答：新账号可能有ECS配额限制
- 点击"申请配额"按钮
- 或者联系阿里云客服提升配额

### 💡 小贴士
- ⏰ 配置页面会自动保存，不用担心刷新丢失
- 📝 建议先通读所有配置项，再开始填写

---

## 步骤3.4：配置集群基本信息

### 🎬 操作说明
现在我们开始填写集群的基本信息，包括集群名称、Kubernetes版本、地域等。这些信息决定了集群的基本属性。

### 📍 详细步骤

**第1步：填写集群名称**
- 在"集群名称"输入框中
- 输入：`my-ack-cluster`
- 这个名称只是用于标识，可以随意起名
- 建议使用小写字母和连字符

**第2步：选择Kubernetes版本**
- 在"Kubernetes版本"下拉框中
- 选择最新的稳定版本（如：1.28.3）
- 不要选择带"beta"或"alpha"的版本
- 新版本通常有更好的性能和安全性

**第3步：确认地域和可用区**
- 地域：应该已经显示"华东1（杭州）"
- 可用区：选择"可用区H"和"可用区I"
- 多可用区可以提高集群的可用性
- 如果一个可用区故障，另一个可用区可以继续服务

**第4步：选择VPC和交换机**
- VPC：选择我们在模块2创建的"my-vpc"
- 交换机：选择"my-vswitch-1"和"my-vswitch-2"
- 这两个交换机分别在不同的可用区
- 确保选择的交换机和可用区对应

**第5步：配置Pod网络CIDR**
- 保持默认值：`172.16.0.0/16`
- 这是Pod的IP地址范围
- 不要和VPC的CIDR冲突
- 默认值通常就够用了

**第6步：配置Service网络CIDR**
- 保持默认值：`172.19.0.0/20`
- 这是Service的IP地址范围
- 同样不要和VPC的CIDR冲突
- 默认值通常就够用了

### ✅ 验证点
- 集群名称已填写：`my-ack-cluster`
- Kubernetes版本已选择（如：1.28.3）
- VPC显示为：`my-vpc`
- 交换机显示为：`my-vswitch-1, my-vswitch-2`
- Pod CIDR和Service CIDR已配置

### ⚠️ 常见问题

**问题1：找不到我创建的VPC？**
- 答：检查地域是否正确
- VPC必须和集群在同一地域
- 如果还是找不到，回到模块2检查VPC是否创建成功

**问题2：Pod CIDR和Service CIDR是什么？**
- 答：这是Kubernetes内部使用的IP地址范围
- Pod CIDR：每个Pod会分配一个这个范围内的IP
- Service CIDR：每个Service会分配一个这个范围内的IP
- 这些IP只在集群内部使用，不会暴露到公网

**问题3：Pod CIDR可以和VPC CIDR一样吗？**
- 答：不可以，会冲突
- VPC CIDR是：192.168.0.0/16
- Pod CIDR是：172.16.0.0/16
- 它们必须是不同的网段

**问题4：为什么要选择两个可用区？**
- 答：提高可用性
- 如果一个可用区的机房故障，另一个可用区还能工作
- 这是生产环境的最佳实践

### 💡 小贴士
- 🏷️ 集群名称建议包含环境信息（如：prod-ack-cluster）
- 🔄 Kubernetes版本可以后续升级，不用太纠结
- 🌐 网络CIDR配置后不能修改，请仔细检查

---

## 步骤3.5：配置节点池

### 🎬 操作说明
节点池是Worker节点的集合。我们需要配置节点的规格、数量、系统盘等信息。这些配置决定了集群的计算能力和成本。

### 📍 详细步骤

**第1步：找到节点池配置区域**
- 在页面中向下滚动
- 找到"节点池配置"部分
- 看到"默认节点池"的配置表单

**第2步：配置节点池名称**
- 在"节点池名称"输入框中
- 输入：`default-pool`
- 这个名称用于标识节点池
- 一个集群可以有多个节点池

**第3步：选择实例规格**
- 点击"选择实例规格"按钮
- 在弹出的规格选择器中，找到"通用型"标签页
- 找到规格：`ecs.t6-c1m2.large`
- 这个规格是：2核CPU + 4GB内存
- 点击选择这个规格
- 点击"确定"按钮

**第4步：设置节点数量**
- 在"节点数量"输入框中
- 输入数字：`2`
- 这样我们就有2个Worker节点
- 2个节点可以实现基本的高可用

**第5步：配置系统盘**
- 系统盘类型：选择"高效云盘"
- 系统盘大小：输入`40`（GB）
- 高效云盘性能够用，价格便宜
- 40GB足够运行系统和Docker镜像

**第6步：配置登录方式**
- 选择"密钥对"方式
- 在下拉框中选择我们在模块1创建的密钥对
- 如果没有密钥对，可以选择"密码"方式
- 密码方式需要设置root密码（至少8位，包含大小写字母和数字）

**第7步：配置数据盘（可选）**
- 如果需要存储大量数据，可以添加数据盘
- 对于学习测试，可以不添加数据盘
- 点击"不添加数据盘"

### ✅ 验证点
- 节点池名称：`default-pool`
- 实例规格：`ecs.t6-c1m2.large (2核4GB)`
- 节点数量：`2`
- 系统盘：`高效云盘 40GB`
- 登录方式：已配置（密钥对或密码）
- 右侧费用预估更新为约¥446/月

### ⚠️ 常见问题

**问题1：为什么选择2核4G规格？**
- 答：这是最小的推荐配置
- 1核2G太小，可能导致Pod无法启动
- 4核8G太贵，学习阶段不需要
- 2核4G是性价比最高的选择

**问题2：为什么要2个节点？**
- 答：实现高可用
- 1个节点故障时，另一个节点可以继续服务
- Kubernetes会自动将Pod调度到健康的节点
- 如果只是学习测试，1个节点也可以

**问题3：系统盘40GB够用吗？**
- 答：对于大多数场景够用
- 系统盘主要存储操作系统和Docker镜像
- 如果应用需要存储大量数据，应该使用数据盘或对象存储
- 40GB可以存储约10-20个常见的Docker镜像

**问题4：可以后续增加节点吗？**
- 答：可以
- 在ACK控制台可以随时扩容节点池
- 也可以随时缩容
- 甚至可以创建新的节点池（不同规格）

**问题5：密钥对和密码哪个更安全？**
- 答：密钥对更安全
- 密钥对使用非对称加密，不会传输密码
- 密码可能被暴力破解
- 生产环境强烈建议使用密钥对

### 💡 小贴士
- 💰 成本提示：2个2核4G节点，约¥446/月
- 🎯 学习建议：如果预算有限，可以先用1个节点
- ⏰ 时间提示：节点创建需要约5分钟
- 🔒 安全建议：生产环境使用密钥对，不要使用密码

---

## 步骤3.6：配置组件和插件

### 🎬 操作说明
ACK提供了很多可选的组件和插件，如监控、日志、Ingress等。我们先保持默认配置，后续可以按需安装。

### 📍 详细步骤

**第1步：查看组件配置区域**
- 在页面中继续向下滚动
- 找到"组件配置"部分
- 看到多个可选组件的开关

**第2步：保持默认组件配置**
- 日志服务：保持默认（通常是开启的）
- 监控服务：保持默认（通常是开启的）
- Ingress：暂时不勾选（我们会在模块4单独配置ALB Ingress）
- 其他组件：保持默认

**第3步：配置标签（可选）**
- 如果需要给集群打标签，可以在"标签"区域添加
- ���签格式：键值对，如 `env: test`
- 标签用于资源管理和成本分析
- 对于学习测试，可以不添加标签

### ✅ 验证点
- 组件配置区域已查看
- 日志和监控服务已启用
- Ingress暂时未勾选

### ⚠️ 常见问题

**问题1：为什么不现在安装Ingress？**
- 答：我们会在模块4安装ALB Ingress
- ALB Ingress是阿里云推荐的七层负载均衡方案
- 现在安装的是Nginx Ingress，功能较弱
- 所以我们跳过，后续安装更好的方案

**问题2：日志服务和监控服务收费吗？**
- 答：基础功能免费
- 日志服务有免费额度（500MB/天）
- 监控服务基础指标免费
- 超出免费额度才收费

**问题3：标签有什么用？**
- 答：用于资源管理
- 可以按标签筛选资源
- 可以按标签统计成本
- 可以按标签设置权限

### 💡 小贴士
- 📊 建议开启日志和监控，方便后续排查问题
- 🏷️ 生产环境建议添加标签（如：env、project、owner）
- 🔌 组件可以后续安装，不用现在全部配置

---

## 步骤3.7：提交创建集群

### 🎬 操作说明
现在所有配置都完成了，我们可以提交创建集群了。提交后，阿里云会开始创建集群，这个过程大约需要15分钟。

### 📍 详细步骤

**第1步：检查配置摘要**
- 在页面右侧，查看费用预估
- 应该显示约¥446/月（2个2核4G节点）
- 检查配置摘要是否正确

**第2步：勾选服务协议**
- 在页面底部，找到服务协议复选框
- 勾选"我已阅读并同意《容器服务服务协议》"
- 这是必须的步骤

**第3步：点击创建集群**
- 点击页面底部的蓝色"创建集群"按��
- 页面会显示"正在创建集群"的提示
- 页面跳转到集群列表

**第4步：查看集群状态**
- 在集群列表中，看到新创建的集群
- 集群名称：`my-ack-cluster`
- 集群状态：显示为"创建中"
- 进度条显示创建进度

### ✅ 验证点
- 集群列表中出现新集群
- 集群状态显示为"创建中"
- 进度条在移动（表示正在创建）

### ⚠️ 常见问题

**问题1：点击"创建集群"后没反应？**
- 答：可能是配置有误
- 页面会在配置项旁边显示红色错误提示
- 检查所有必填项是否都已填写
- 检查网络CIDR是否冲突

**问题2：创建失败怎么办？**
- 答：查看失败原因
- 点击集群名称，进入集群详情
- 在"事件"标签页查看错误信息
- 常见原因：配额不足、网络配置错误

**问题3：创建需要多长时间？**
- 答：通常15-20分钟
- 主要时间花在创建ECS实例和初始化节点
- 可以在集群列表页面刷新查看进度
- 不要关闭浏览器，但可以做其他事情

### 💡 小贴士
- ⏰ 创建时间约15分钟，可以先休息一下
- 🔄 页面会自动刷新状态，不用手动刷新
- 📧 可以配置通知，创建完成后会收到邮件或短信

---

## 步骤3.8：等待集群创建完成

### 🎬 操作说明
现在集群正在创建中，我们需要等待约15分钟。在等待期间，我们可以了解一下集群创建的过程，以及创建完成后需要做什么。

### 📍 创建过程说明

**阶段1：创建控制平面（约3分钟）**
- 阿里云在后台创建Kubernetes控制平面
- 包括API Server、Controller Manager、Scheduler等组件
- 这些组件运行在阿里云托管的环境中
- 你不需要关心这些组件的运维

**阶段2：创建Worker节点（约5分钟）**
- 创建2台ECS实例
- 安装操作系统（Alibaba Cloud Linux）
- 配置网络和安全组
- 挂载系统盘

**阶段3：初始化节点（约5分钟）**
- 在每个节点上安装Docker
- 在每个节点上安装Kubelet和Kube-proxy
- 将节点加入集群
- 安装网络插件（Flannel或Terway）

**阶段4：安装系统组件（约2分钟）**
- 安装CoreDNS（DNS服务）
- 安装Metrics Server（监控服务）
- 安装日志组件
- 验证所有组件正常运行

### ✅ 验证点
- 集群状态从"创建中"变为"运行中"
- 进度条显示100%
- 集群详情页面可以正常访问

### ⚠️ 常见问题

**问题1：创建超过20分钟还没完成？**
- 答：可能是资源不足
- 检查ECS配额是否充足
- 检查账户余额是否充足
- 如果超过30分钟，联系阿里云客服

**问题2：创建失败了怎么办？**
- 答：查看失败原因
- 在集群详情的"事件"标签页查看错误
- 根据错误信息修复问题
- 删除失败的集群，重新创建

**问题3：等待期间可以做什么？**
- 答：可以做其他事情
- 阅读Kubernetes基础知识
- 准备应用的Docker镜像
- 配置本地的kubectl工具

### 💡 小贴士
- ☕ 创建时间约15分钟，可以喝杯咖啡
- 📚 推荐阅读：Kubernetes官方文档
- 🎯 下一步：下载kubeconfig文件，配置kubectl

---

## 步骤3.9：下载kubeconfig文件

### 🎬 操作说明
集群创建完成后，我们需要下载kubeconfig文件。这个文件包含了连接集群所需的认证信息，kubectl工具需要这个文件才能连接到集群。

### 📍 详细步骤

**第1步：进入集群详情**
- 在集群列表中，找到我们创建的集群
- 集群状态应该显示为"运行中"
- 点击集群名称，进入集群详情页面

**第2步：找到kubeconfig下载入口**
- 在集群详情页面顶部
- 找到"连接信息"区域
- 看到"KubeConfig"标签页
- 点击"KubeConfig"标签页

**第3步：复制kubeconfig内容**
- 看到一个文本框，里面是kubeconfig的内容
- 内容是YAML格式的配置文件
- 点击"复制"按钮，复制所有内容
- 或者点击"下载"按钮，下载为文件

**第4步：保存kubeconfig文件**
- 在本地电脑上，打开终端
- 创建kubectl配置目录：
  ```bash
  mkdir -p ~/.kube
  ```
- 将复制的内容保存到文件：
  ```bash
  # 方式1：使用文本编辑器
  vim ~/.kube/config
  # 粘贴内容，保存退出

  # 方式2：如果下载了文件
  mv ~/Downloads/kubeconfig ~/.kube/config
  ```

**第5步：设置文件权限**
- 为了安全，设置文件权限为只有当前用户可读：
  ```bash
  chmod 600 ~/.kube/config
  ```

### ✅ 验证点
- kubeconfig文件已保存到 `~/.kube/config`
- 文件权限为600（-rw-------）
- 文件内容是YAML格式

### ⚠️ 常见问题

**问题1：找不到"连接信息"区域？**
- 答：可能是集群还在创建中
- 等待集群状态变为"运行中"
- 刷新页面，重新查看

**问题2：kubeconfig文件是什么？**
- 答：这是kubectl的配置文件
- 包含集群的API Server地址
- 包含认证信息（证书或Token）
- kubectl通过这个文件连接到集群

**问题3：kubeconfig文件安全吗？**
- 答：非常重要，需要妥善保管
- 这个文件包含集群的完整访问权限
- 不要上传到GitHub等公开平台
- 不要分享给不信任的人
- 建议设置文件权限为600

**问题4：可以有多个kubeconfig文件吗？**
- 答：可以
- 可以为不同的集群创建不同的kubeconfig文件
- 使用环境变量KUBECONFIG指定使用哪个文件
- 或者使用kubectl config命令切换上下文

### 💡 小贴士
- 🔒 kubeconfig文件包含敏感信息，请妥善保管
- 📁 建议备份kubeconfig文件到安全的地方
- 🔄 如果文件泄露，可以在ACK控制台重新生成

---

## 步骤3.10：配置kubectl连接集群

### 🎬 操作说明
现在我们已经有了kubeconfig文件，接下来需要安装kubectl工具，并验证能否连接到集群。

### 📍 详细步骤

**第1步：检查kubectl是否已安装**
- 在终端中运行：
  ```bash
  kubectl version --client
  ```
- 如果显示版本信息，说明已安装
- 如果提示"command not found"，需要安装kubectl

**第2步：安装kubectl（如果未安装）**
- macOS用户：
  ```bash
  brew install kubectl
  ```
- Linux用户：
  ```bash
  curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"
  chmod +x kubectl
  sudo mv kubectl /usr/local/bin/
  ```
- Windows用户：
  - 下载kubectl.exe：https://kubernetes.io/docs/tasks/tools/install-kubectl-windows/
  - 将kubectl.exe放到PATH目录中

**第3步：验证kubectl配置**
- 运行命令查看当前配置：
  ```bash
  kubectl config view
  ```
- 应该看到集群的配置信息
- 包括集群名称、API Server地址等

**第4步：查看集群信息**
- 运行命令查看集群信息：
  ```bash
  kubectl cluster-info
  ```
- 应该看到类似输出：
  ```
  Kubernetes control plane is running at https://xxx.xxx.xxx.xxx:6443
  CoreDNS is running at https://xxx.xxx.xxx.xxx:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy
  ```

### ✅ 验证点
- kubectl命令可以正常运行
- `kubectl version --client` 显示版本信息
- `kubectl cluster-info` 显示集群信息
- 没有报错信息

### ⚠️ 常见问题

**问题1：kubectl命令找不到？**
- 答：kubectl未安装或不在PATH中
- 按照上面的步骤安装kubectl
- 或者检查PATH环境变量

**问题2：kubectl cluster-info报错"Unable to connect"？**
- 答：可能是kubeconfig文件配置错误
- 检查 `~/.kube/config` 文件是否存在
- 检查文件内容是否正确
- 检查网络连接是否正常

**问题3：kubectl命令很慢？**
- 答：可能是网络延迟
- ACK的API Server在阿里云，如果你在国外可能会慢
- 可以使用阿里云的VPN加速
- 或者在阿里云ECS上操作

### 💡 小贴士
- 🔧 kubectl是Kubernetes的命令行工具，非常重要
- 📚 建议学习kubectl的基本命令
- ⚡ 可以配置kubectl的自动补全，提高效率

---

## 步骤3.11：验证集群节点

### 🎬 操作说明
现在kubectl已经配置好了，我们来验证集群的节点是否正常。这是确认集群创建成功的最后一步。

### 📍 详细步骤

**第1步：查看节点列表**
- 在终端中运行：
  ```bash
  kubectl get nodes
  ```
- 应该看到2个节点的列表
- 输出类似：
  ```
  NAME                                 STATUS   ROLES    AGE   VERSION
  cn-hangzhou.192.168.1.10             Ready    <none>   10m   v1.28.3
  cn-hangzhou.192.168.1.11             Ready    <none>   10m   v1.28.3
  ```

**第2步：检查节点状态**
- 确认每个节点的STATUS都是"Ready"
- 如果是"NotReady"，说明节点还在初始化
- 等待几分钟，再次运行命令查看

**第3步：查看节点详细信息**
- 选择一个节点，查看详细信息：
  ```bash
  kubectl describe node <节点名称>
  ```
- 可以看到节点的详细配置
- 包括CPU、内存、操作系统、Docker版本等

**第4步：查看系统Pod**
- 运行命令查看系统Pod：
  ```bash
  kubectl get pods -n kube-system
  ```
- 应该看到多个系统Pod
- 包括coredns、kube-proxy、flannel等
- 确认所有Pod的STATUS都是"Running"

### ✅ 验证点
- `kubectl get nodes` 显示2个节点
- 所有节点的STATUS都是"Ready"
- 系统Pod都在运行中（STATUS为Running）
- 没有报错信息

### ⚠️ 常见问题

**问题1：节点状态是NotReady？**
- 答：节点可能还在初始化
- 等待5-10分钟，再次查看
- 如果长时间NotReady，查看节点事件：
  ```bash
  kubectl describe node <节点名称>
  ```

**问题2：系统Pod有些是Pending状态？**
- 答：Pod可能在等待调度
- 查看Pod详情：
  ```bash
  kubectl describe pod <Pod名称> -n kube-system
  ```
- 检查是否有资源不足的提示

**问题3：coredns Pod一直CrashLoopBackOff？**
- 答：可能是网络插件问题
- 这是已知问题，通常会自动恢复
- 如果长时间不恢复，联系阿里云客服

### 💡 小贴士
- ✅ 所有节点Ready，说明集群创建成功
- 📊 可以使用 `kubectl top nodes` 查看节点资源使用情况
- 🎯 下一步：配置ALB Ingress，让应用可以从外部访问

---

## 模块总结

### 🎉 恭喜！你已经完成了ACK集群的创建

在这个模块中，我们完成了以下工作：

1. ✅ **理解了ACK集群类型**
   - 标准托管版、专有版、Serverless版的区别
   - 选择了标准托管版（控制平面免费）

2. ✅ **创建了ACK集群**
   - 配置了集群基本信息（名称、版本、地域）
   - 配置了网络（VPC、交换机、Pod CIDR）
   - 配置了节点池（2个2核4G节点）

3. ✅ **配置了kubectl**
   - 下载了kubeconfig文件
   - 安装了kubectl工具
   - 验证了集群连接

4. ✅ **验证了集群状态**
   - 确认了节点状态为Ready
   - 确认了系统Pod正常运行

### 📊 资源清单

| 资源类型 | 资源名称 | 规格 | 数量 | 月成本 |
|---------|---------|------|------|--------|
| ACK集群 | my-ack-cluster | 标准托管版 | 1 | ¥0（控制平面免费） |
| ECS实例 | Worker节点 | 2核4G | 2 | ¥446 |
| **总计** | - | - | - | **¥446/月** |

### 🎯 下一步

现在集群已经创建好了，但是应用还无法从外部访问。在下一个模块中，我们将：

1. 安装ALB Ingress Controller
2. 创建ALB实例
3. 配置域名和SSL证书
4. 让应用可以通过HTTPS访问

**继续学习**：[模块4：配置ALB Ingress](/blog/devops/posts/2026-01-29-ack-sop-04-alb-ingress/)

### 💡 重要提示

- 🔒 **安全提示**：kubeconfig文件包含集群的完整访问权限，请妥善保管
- 💰 **成本提示**：集群会持续产生费用，不用时记得删除
- 📚 **学习建议**：熟悉kubectl的基本命令，这是使用Kubernetes的基础
- 🎯 **最佳实践**：生产环境建议使用至少3个节点，分布在3个可用区

---

## 附录：常用kubectl命令

```bash
# 查看集群信息
kubectl cluster-info
kubectl version

# 查看节点
kubectl get nodes
kubectl describe node <节点名称>
kubectl top nodes  # 查看节点资源使用情况

# 查看Pod
kubectl get pods -A  # 查看所有命名空间的Pod
kubectl get pods -n kube-system  # 查看系统Pod
kubectl describe pod <Pod名称> -n <命名空间>
kubectl logs <Pod名称> -n <命名空间>

# 查看服务
kubectl get svc -A
kubectl describe svc <服务名称> -n <命名空间>

# 查看命名空间
kubectl get namespaces
kubectl create namespace <命名空间名称>

# 应用配置
kubectl apply -f <配置文件>
kubectl delete -f <配置文件>

# 进入Pod
kubectl exec -it <Pod名称> -n <命名空间> -- /bin/bash
```

---

**导航**：
- **上一步**：[模块2：创建VPC网络](/blog/devops/posts/2026-01-29-ack-sop-02-vpc-network/)
- **下一步**：[模块4：配置ALB Ingress](/blog/devops/posts/2026-01-29-ack-sop-04-alb-ingress/)
- **返回主索引**：[阿里云ACK部署SOP](/blog/devops/posts/2026-01-29-aliyun-ack-deployment-sop/)
