---
title: "Buffer Poolï¼šMySQLçš„å†…å­˜ç®¡ç†æ ¸å¿ƒ"
date: 2025-01-15T13:00:00+08:00
draft: false
tags: ["MySQL", "Buffer Pool", "å†…å­˜ç®¡ç†", "æ€§èƒ½ä¼˜åŒ–"]
categories: ["æ•°æ®åº“"]
description: "æ·±å…¥ç†è§£Buffer Poolçš„å·¥ä½œåŸç†ï¼ŒæŒæ¡LRUé“¾è¡¨ã€é¢„è¯»æœºåˆ¶ã€åˆ·ç›˜ç­–ç•¥"
series: ["MySQLä»å…¥é—¨åˆ°ç²¾é€š"]
weight: 49
stage: 5
stageTitle: "æ¶æ„åŸç†ç¯‡"
---

## Buffer Poolæ¦‚è¿°

**Buffer Poolï¼ˆç¼“å†²æ± ï¼‰** æ˜¯InnoDBæœ€é‡è¦çš„å†…å­˜ç»“æ„ï¼Œç”¨äºç¼“å­˜æ•°æ®é¡µå’Œç´¢å¼•é¡µã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MySQLå†…å­˜ç»“æ„                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Buffer Poolï¼ˆæœ€å¤§ï¼Œé»˜è®¤128MBï¼‰         â”‚  ç¼“å­˜æ•°æ®é¡µ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Change Buffer                        â”‚  ç¼“å­˜å†™æ“ä½œ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Adaptive Hash Index                  â”‚  è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Log Buffer                           â”‚  ç¼“å­˜redo log
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Buffer Poolçš„ä½œç”¨

### 1. å‡å°‘ç£ç›˜IO

```sql
-- æ— Buffer Poolï¼ˆæ¯æ¬¡æŸ¥è¯¢éƒ½è®¿é—®ç£ç›˜ï¼‰
SELECT * FROM users WHERE id = 1;  -- ç£ç›˜IOï¼š10ms

-- æœ‰Buffer Poolï¼ˆç¼“å­˜å‘½ä¸­ï¼Œç›´æ¥è¯»å†…å­˜ï¼‰
SELECT * FROM users WHERE id = 1;  -- å†…å­˜è¯»å–ï¼š0.01msï¼ˆå¿«1000å€ï¼‰
```

### 2. æå‡å¹¶å‘æ€§èƒ½

```sql
-- å¤šä¸ªäº‹åŠ¡å¹¶å‘è¯»å–åŒä¸€æ•°æ®é¡µ
äº‹åŠ¡A: SELECT * FROM users WHERE id = 1;  -- åŠ è½½åˆ°Buffer Pool
äº‹åŠ¡B: SELECT * FROM users WHERE id = 1;  -- ç›´æ¥ä»Buffer Poolè¯»å–ï¼ˆæ— ç£ç›˜IOï¼‰
äº‹åŠ¡C: SELECT * FROM users WHERE id = 1;  -- ç›´æ¥ä»Buffer Poolè¯»å–
```

---

## Buffer Poolçš„ç»“æ„

### 1. ç¼“å†²é¡µï¼ˆBuffer Pageï¼‰

**ç¼“å†²é¡µ**æ˜¯Buffer Poolçš„åŸºæœ¬å•ä½ï¼Œä¸ç£ç›˜é¡µä¸€ä¸€å¯¹åº”ã€‚

```
Buffer Pool
  â”œâ”€ ç¼“å†²é¡µ1ï¼ˆ16KBï¼‰â†’ å¯¹åº”ç£ç›˜é¡µ1
  â”œâ”€ ç¼“å†²é¡µ2ï¼ˆ16KBï¼‰â†’ å¯¹åº”ç£ç›˜é¡µ2
  â”œâ”€ ...
  â””â”€ ç¼“å†²é¡µNï¼ˆ16KBï¼‰â†’ å¯¹åº”ç£ç›˜é¡µN
```

### 2. æ§åˆ¶å—ï¼ˆControl Blockï¼‰

**æ§åˆ¶å—**å­˜å‚¨ç¼“å†²é¡µçš„å…ƒæ•°æ®ã€‚

```
æ§åˆ¶å—ï¼ˆçº¦800å­—èŠ‚ï¼‰
  â”œâ”€ è¡¨ç©ºé—´å·
  â”œâ”€ é¡µå·
  â”œâ”€ é¡µç±»å‹ï¼ˆæ•°æ®é¡µã€ç´¢å¼•é¡µã€undoé¡µç­‰ï¼‰
  â”œâ”€ ä¿®æ”¹æ ‡å¿—ï¼ˆdirtyæ ‡å¿—ï¼‰
  â”œâ”€ é”ä¿¡æ¯
  â””â”€ LRUé“¾è¡¨æŒ‡é’ˆ
```

**å†…å­˜å¸ƒå±€**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ§åˆ¶å—åŒºåŸŸ                            â”‚  çº¦Buffer Poolçš„5%
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç¼“å†²é¡µåŒºåŸŸ                            â”‚  çº¦Buffer Poolçš„95%
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## é¡µçš„ç®¡ç†ï¼šä¸‰å¤§é“¾è¡¨

### 1. Freeé“¾è¡¨ï¼ˆç©ºé—²é“¾è¡¨ï¼‰

**ä½œç”¨**ï¼šç®¡ç†æœªä½¿ç”¨çš„ç¼“å†²é¡µã€‚

```
Freeé“¾è¡¨
  â”œâ”€ æ§åˆ¶å—1 â†’ ç¼“å†²é¡µ1ï¼ˆç©ºé—²ï¼‰
  â”œâ”€ æ§åˆ¶å—2 â†’ ç¼“å†²é¡µ2ï¼ˆç©ºé—²ï¼‰
  â””â”€ ...

-- åŠ è½½æ–°é¡µæ—¶
1. ä»Freeé“¾è¡¨è·å–ç©ºé—²é¡µ
2. åŠ è½½ç£ç›˜æ•°æ®åˆ°ç¼“å†²é¡µ
3. ä»Freeé“¾è¡¨ç§»é™¤
4. åŠ å…¥LRUé“¾è¡¨
```

### 2. LRUé“¾è¡¨ï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨é“¾è¡¨ï¼‰

**ä½œç”¨**ï¼šç®¡ç†å·²ä½¿ç”¨çš„ç¼“å†²é¡µï¼Œå†³å®šå“ªäº›é¡µè¢«æ·˜æ±°ã€‚

**æ”¹è¿›ç‰ˆLRU**ï¼šåˆ†ä¸ºyoungåŒºå’ŒoldåŒºï¼ˆ5:3æ¯”ä¾‹ï¼‰

```
LRUé“¾è¡¨ï¼ˆä»å¤´åˆ°å°¾ï¼šæœ€è¿‘ä½¿ç”¨ â†’ æœ€ä¹…æœªä½¿ç”¨ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  youngåŒºï¼ˆå¤´éƒ¨ï¼Œ5/8ï¼‰                  â”‚  çƒ­æ•°æ®ï¼Œé¢‘ç¹è®¿é—®
â”‚  â”œâ”€ é¡µ1ï¼ˆæœ€è¿‘è®¿é—®ï¼‰                      â”‚
â”‚  â”œâ”€ é¡µ2                               â”‚
â”‚  â””â”€ ...                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  oldåŒºï¼ˆå°¾éƒ¨ï¼Œ3/8ï¼‰                     â”‚  å†·æ•°æ®ï¼Œå‡†å¤‡æ·˜æ±°
â”‚  â”œâ”€ ...                               â”‚
â”‚  â””â”€ é¡µNï¼ˆæœ€ä¹…æœªè®¿é—®ï¼‰                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸ºä»€ä¹ˆæ”¹è¿›ï¼Ÿ**

**é—®é¢˜**ï¼šå…¨è¡¨æ‰«æä¼šæ±¡æŸ“ç¼“å­˜

```sql
-- å…¨è¡¨æ‰«æï¼ˆæ‰«æ100ä¸‡è¡Œï¼‰
SELECT * FROM large_table;
-- ä¼šåŠ è½½å¤§é‡é¡µåˆ°LRUé“¾è¡¨ï¼ŒæŒ¤æ‰çƒ­æ•°æ®
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ–°åŠ è½½çš„é¡µæ”¾å…¥**oldåŒºå¤´éƒ¨**ï¼ˆä¸æ˜¯youngåŒºï¼‰
2. é¡µåœ¨oldåŒºåœç•™æ—¶é—´è¶…è¿‡**innodb_old_blocks_time**ï¼ˆé»˜è®¤1ç§’ï¼‰
3. å†æ¬¡è®¿é—®æ—¶ï¼Œæ‰ç§»åŠ¨åˆ°youngåŒºå¤´éƒ¨

```
æ–°é¡µåŠ è½½æµç¨‹ï¼š
1. ç£ç›˜é¡µ â†’ oldåŒºå¤´éƒ¨
2. åœç•™1ç§’ â†’ å†æ¬¡è®¿é—® â†’ youngåŒºå¤´éƒ¨ï¼ˆçƒ­æ•°æ®ï¼‰
3. åœç•™1ç§’ â†’ æœªè®¿é—® â†’ æ·˜æ±°ï¼ˆå†·æ•°æ®ï¼‰
```

### 3. Flushé“¾è¡¨ï¼ˆè„é¡µé“¾è¡¨ï¼‰

**ä½œç”¨**ï¼šç®¡ç†è„é¡µï¼ˆè¢«ä¿®æ”¹ä½†æœªåˆ·ç›˜çš„é¡µï¼‰ã€‚

```
Flushé“¾è¡¨
  â”œâ”€ æ§åˆ¶å—1 â†’ ç¼“å†²é¡µ1ï¼ˆdirtyï¼Œæœªåˆ·ç›˜ï¼‰
  â”œâ”€ æ§åˆ¶å—2 â†’ ç¼“å†²é¡µ2ï¼ˆdirtyï¼Œæœªåˆ·ç›˜ï¼‰
  â””â”€ ...

-- åˆ·ç›˜æµç¨‹
1. åå°çº¿ç¨‹æ‰«æFlushé“¾è¡¨
2. é€‰æ‹©è„é¡µå†™å…¥ç£ç›˜
3. æ¸…é™¤dirtyæ ‡å¿—
4. ä»Flushé“¾è¡¨ç§»é™¤
```

---

## é¢„è¯»æœºåˆ¶ï¼ˆRead-Aheadï¼‰

**é¢„è¯»**ï¼šé¢„æµ‹æ€§åœ°åŠ è½½é¡µåˆ°Buffer Poolï¼Œå‡å°‘æœªæ¥çš„ç£ç›˜IOã€‚

### 1. çº¿æ€§é¢„è¯»ï¼ˆLinear Read-Aheadï¼‰

**è§¦å‘æ¡ä»¶**ï¼šé¡ºåºè®¿é—®ä¸€ä¸ªåŒºï¼ˆExtentï¼Œ64é¡µï¼‰ä¸­çš„å¤šä¸ªé¡µã€‚

```sql
-- é¡ºåºæ‰«æè¡¨
SELECT * FROM users ORDER BY id;

-- é¢„è¯»æµç¨‹
1. è®¿é—®åŒº1çš„ç¬¬1é¡µ
2. è®¿é—®åŒº1çš„ç¬¬2é¡µ
3. ...
4. è®¿é—®åŒº1çš„ç¬¬56é¡µ
5. è§¦å‘çº¿æ€§é¢„è¯»ï¼šåŠ è½½åŒº1çš„å‰©ä½™é¡µï¼ˆ57-64é¡µï¼‰
6. é¢„è¯»ä¸‹ä¸€ä¸ªåŒºï¼ˆåŒº2çš„å…¨éƒ¨64é¡µï¼‰
```

**å‚æ•°**ï¼š

```sql
-- çº¿æ€§é¢„è¯»é˜ˆå€¼ï¼ˆé»˜è®¤56é¡µï¼‰
SHOW VARIABLES LIKE 'innodb_read_ahead_threshold';
-- 56
```

### 2. éšæœºé¢„è¯»ï¼ˆRandom Read-Aheadï¼‰

**è§¦å‘æ¡ä»¶**ï¼šçŸ­æ—¶é—´å†…è®¿é—®ä¸€ä¸ªåŒºçš„å¤šä¸ªé¡µï¼ˆä¸è¦æ±‚é¡ºåºï¼‰ã€‚

```sql
-- éšæœºè®¿é—®
SELECT * FROM users WHERE id IN (1, 10, 20, 30, 40);

-- å¦‚æœè¿™äº›é¡µå±äºåŒä¸€ä¸ªåŒºï¼Œä¸”è®¿é—®é¢‘ç‡é«˜
-- è§¦å‘éšæœºé¢„è¯»ï¼šåŠ è½½è¯¥åŒºçš„å‰©ä½™é¡µ
```

**å‚æ•°**ï¼š

```sql
-- éšæœºé¢„è¯»å¼€å…³ï¼ˆé»˜è®¤OFFï¼‰
SHOW VARIABLES LIKE 'innodb_random_read_ahead';
-- OFFï¼ˆä¸æ¨èå¼€å¯ï¼Œå®¹æ˜“æ±¡æŸ“ç¼“å­˜ï¼‰
```

---

## åˆ·ç›˜ç­–ç•¥

### ä½•æ—¶åˆ·ç›˜ï¼Ÿ

```
è§¦å‘æ¡ä»¶ï¼š
1. redo logå†™æ»¡ï¼ˆå¼ºåˆ¶åˆ·ç›˜ï¼‰
2. Buffer Poolç©ºé—´ä¸è¶³ï¼ˆæ·˜æ±°è„é¡µï¼‰
3. ç³»ç»Ÿç©ºé—²æ—¶ï¼ˆåå°çº¿ç¨‹å®šæœŸåˆ·ç›˜ï¼‰
4. MySQLæ­£å¸¸å…³é—­ï¼ˆåˆ·æ–°æ‰€æœ‰è„é¡µï¼‰
```

### åˆ·ç›˜æµç¨‹

```
1. åå°çº¿ç¨‹ï¼ˆPage Cleaner Threadï¼‰æ‰«æFlushé“¾è¡¨
2. é€‰æ‹©æœ€è€çš„è„é¡µï¼ˆLSNæœ€å°ï¼‰
3. å†™å…¥Double Write Bufferï¼ˆé˜²æ­¢éƒ¨åˆ†å†™ï¼‰
4. å†™å…¥ç£ç›˜æ•°æ®æ–‡ä»¶
5. æ¸…é™¤dirtyæ ‡å¿—
```

---

## Buffer Poolé…ç½®

### 1. å¤§å°é…ç½®

```sql
-- æŸ¥çœ‹Buffer Poolå¤§å°
SHOW VARIABLES LIKE 'innodb_buffer_pool_size';
-- 134217728ï¼ˆ128MBï¼Œé»˜è®¤ï¼Œå¤ªå°ï¼‰

-- è®¾ç½®ä¸ºç‰©ç†å†…å­˜çš„50-80%ï¼ˆæ¨èï¼‰
# my.cnf
[mysqld]
innodb_buffer_pool_size = 8G  -- 8GB
```

**è®¡ç®—å…¬å¼**ï¼š

```
æœåŠ¡å™¨å†…å­˜ï¼š16GB
æ“ä½œç³»ç»Ÿï¼š2GB
MySQLå…¶ä»–å†…å­˜ï¼š2GB
Buffer Poolï¼š12GBï¼ˆ16 - 2 - 2ï¼‰
```

### 2. å®ä¾‹æ•°é…ç½®

```sql
-- æŸ¥çœ‹Buffer Poolå®ä¾‹æ•°
SHOW VARIABLES LIKE 'innodb_buffer_pool_instances';
-- 8ï¼ˆé»˜è®¤ï¼ŒBuffer Pool >= 1GBæ—¶ï¼‰

-- å»ºè®®é…ç½®ï¼ˆå‡å°‘é”ç«äº‰ï¼‰
innodb_buffer_pool_instances = 8  -- 8-16ä¸ªå®ä¾‹
```

### 3. é¢„çƒ­é…ç½®

```sql
-- æŸ¥çœ‹é¢„çƒ­å¼€å…³
SHOW VARIABLES LIKE 'innodb_buffer_pool_dump_at_shutdown';
-- ONï¼šå…³é—­æ—¶ä¿å­˜çƒ­æ•°æ®é¡µåˆ—è¡¨

SHOW VARIABLES LIKE 'innodb_buffer_pool_load_at_startup';
-- ONï¼šå¯åŠ¨æ—¶åŠ è½½çƒ­æ•°æ®é¡µåˆ—è¡¨

-- æ‰‹åŠ¨ä¿å­˜/åŠ è½½
SET GLOBAL innodb_buffer_pool_dump_now = ON;  -- ä¿å­˜
SET GLOBAL innodb_buffer_pool_load_now = ON;  -- åŠ è½½
```

---

## ç›‘æ§Buffer Pool

### 1. æŸ¥çœ‹çŠ¶æ€

```sql
-- æŸ¥çœ‹Buffer PoolçŠ¶æ€
SHOW ENGINE INNODB STATUS\G

-- å…³é”®æŒ‡æ ‡
Buffer pool size   : 8192        -- æ€»é¡µæ•°
Free buffers       : 1024        -- ç©ºé—²é¡µæ•°
Database pages     : 7100        -- å·²ä½¿ç”¨é¡µæ•°
Old database pages : 2662        -- oldåŒºé¡µæ•°
Modified db pages  : 100         -- è„é¡µæ•°
Pending reads      : 0           -- ç­‰å¾…è¯»å–çš„é¡µæ•°
Pending writes     : 0           -- ç­‰å¾…å†™å…¥çš„é¡µæ•°
```

### 2. ç¼“å­˜å‘½ä¸­ç‡

```sql
-- æŸ¥çœ‹ç¼“å­˜å‘½ä¸­ç‡
SHOW GLOBAL STATUS LIKE 'Innodb_buffer_pool%';

-- å…³é”®æŒ‡æ ‡
Innodb_buffer_pool_read_requests   : 1000000   -- è¯»è¯·æ±‚æ•°
Innodb_buffer_pool_reads            : 10000     -- ç£ç›˜è¯»å–æ•°

-- ç¼“å­˜å‘½ä¸­ç‡è®¡ç®—
å‘½ä¸­ç‡ = (read_requests - reads) / read_requests Ã— 100%
      = (1000000 - 10000) / 1000000 Ã— 100%
      = 99%ï¼ˆè‰¯å¥½ï¼‰

-- æ¨èï¼šå‘½ä¸­ç‡ > 99%
```

### 3. è„é¡µæ¯”ä¾‹

```sql
-- æŸ¥çœ‹è„é¡µæ¯”ä¾‹
SELECT
    VARIABLE_VALUE AS buffer_pool_pages,
    (SELECT VARIABLE_VALUE FROM performance_schema.global_status WHERE VARIABLE_NAME = 'Innodb_buffer_pool_pages_dirty') AS dirty_pages,
    ROUND((SELECT VARIABLE_VALUE FROM performance_schema.global_status WHERE VARIABLE_NAME = 'Innodb_buffer_pool_pages_dirty') /VARIABLE_VALUE * 100, 2) AS dirty_ratio
FROM performance_schema.global_status
WHERE VARIABLE_NAME = 'Innodb_buffer_pool_pages_data';

-- æ¨èï¼šè„é¡µæ¯”ä¾‹ < 75%
```

---

## å®æˆ˜å»ºè®®

### 1. Buffer Poolå¤§å°è®¾ç½®

```ini
# 16GBæœåŠ¡å™¨
innodb_buffer_pool_size = 12G

# 64GBæœåŠ¡å™¨
innodb_buffer_pool_size = 48G

# 128GBæœåŠ¡å™¨
innodb_buffer_pool_size = 96G
```

### 2. ç›‘æ§å‘½ä¸­ç‡

```bash
# Prometheusç›‘æ§
innodb_buffer_pool_read_requests_total
innodb_buffer_pool_reads_total

# å‘Šè­¦è§„åˆ™ï¼ˆå‘½ä¸­ç‡ < 95%ï¼‰
(innodb_buffer_pool_read_requests_total - innodb_buffer_pool_reads_total) /
innodb_buffer_pool_read_requests_total < 0.95
```

### 3. ä¼˜åŒ–å»ºè®®

```sql
-- 1. Buffer Poolå¤ªå°ï¼šå‘½ä¸­ç‡ä½
-- è§£å†³ï¼šå¢å¤§innodb_buffer_pool_size

-- 2. è„é¡µè¿‡å¤šï¼šåˆ·ç›˜æ…¢
-- è§£å†³ï¼šå¢åŠ åˆ·ç›˜çº¿ç¨‹
innodb_page_cleaners = 8

-- 3. é¢„è¯»è¿‡åº¦ï¼šç¼“å­˜æ±¡æŸ“
-- è§£å†³ï¼šè°ƒæ•´é¢„è¯»é˜ˆå€¼
innodb_read_ahead_threshold = 32  -- é™ä½é˜ˆå€¼
```

---

## å¸¸è§é¢è¯•é¢˜

**Q1: Buffer Poolçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ**
- ç¼“å­˜æ•°æ®é¡µå’Œç´¢å¼•é¡µï¼Œå‡å°‘ç£ç›˜IOï¼Œæå‡æ€§èƒ½

**Q2: LRUé“¾è¡¨ä¸ºä»€ä¹ˆåˆ†youngåŒºå’ŒoldåŒºï¼Ÿ**
- é˜²æ­¢å…¨è¡¨æ‰«ææ±¡æŸ“ç¼“å­˜ï¼Œä¿æŠ¤çƒ­æ•°æ®

**Q3: å¦‚ä½•æŸ¥çœ‹Buffer Poolå‘½ä¸­ç‡ï¼Ÿ**
- `SHOW GLOBAL STATUS LIKE 'Innodb_buffer_pool%'`
- å‘½ä¸­ç‡ = (read_requests - reads) / read_requests

**Q4: Buffer Poolåº”è¯¥è®¾ç½®å¤šå¤§ï¼Ÿ**
- ç‰©ç†å†…å­˜çš„50-80%

---

## å°ç»“

âœ… **Buffer Pool**ï¼šInnoDBæœ€é‡è¦çš„å†…å­˜ç»“æ„ï¼Œç¼“å­˜æ•°æ®é¡µ
âœ… **LRUé“¾è¡¨**ï¼šyoungåŒº + oldåŒºï¼Œé˜²æ­¢ç¼“å­˜æ±¡æŸ“
âœ… **é¢„è¯»æœºåˆ¶**ï¼šçº¿æ€§é¢„è¯»ã€éšæœºé¢„è¯»ï¼Œå‡å°‘IO
âœ… **åˆ·ç›˜ç­–ç•¥**ï¼šåå°çº¿ç¨‹å®šæœŸåˆ·æ–°è„é¡µ

**å»ºè®®**ï¼šBuffer Poolè®¾ç½®ä¸ºç‰©ç†å†…å­˜çš„50-80%ï¼Œç›‘æ§å‘½ä¸­ç‡ > 99%ã€‚

---

ğŸ“š **ç›¸å…³é˜…è¯»**ï¼š
- ä¸‹ä¸€ç¯‡ï¼šã€ŠChange Bufferï¼šæå‡å†™å…¥æ€§èƒ½ã€‹
- æ¨èï¼šã€Šredo logï¼šå´©æºƒæ¢å¤çš„ä¿éšœã€‹
